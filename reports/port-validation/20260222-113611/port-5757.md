# 端口 5757 落盘报告

- 角色: 主服务端口
- 结果: PASS (37/37)
- 时间: 2026-02-22T03:36:11.444Z ~ 2026-02-22T03:36:21.260Z

## 1. 深度分析
主业务端口。已覆盖健康检查、WS桥接、JS/PY/CAT引擎、proxy/parse、代理族与常用控制器接口。

## 2. 测试明细
| 序号 | 分类 | 用例 | 请求 | 预期 | 实际 | 结果 | 耗时(ms) |
|---|---|---|---|---|---|---|---|
| 1 | 健康 | /health | GET /health | 200+ok | HTTP 200 | PASS | 30 |
| 2 | 基础 | / | GET / | 200 | HTTP 200 | PASS | 21 |
| 3 | WS桥接 | /ws/status | GET /ws/status | 200 | HTTP 200 | PASS | 2 |
| 4 | WS桥接 | /ws echo | ws://127.0.0.1:5757/ws | welcome+echo | 收到welcome+echo | PASS | 9 |
| 5 | 引擎 | JS设置中心 | GET /api/%E8%AE%BE%E7%BD%AE%E4%B8%AD%E5%BF%83 | 200 | HTTP 200 | PASS | 31 |
| 6 | 引擎 | PY依赖测试 | GET /api/%E4%BE%9D%E8%B5%96%E6%B5%8B%E8%AF%95?do=py | 200 | HTTP 200 | PASS | 203 |
| 7 | 引擎 | CAT猫测试 | GET /api/%E7%8C%AB%E6%B5%8B%E8%AF%95?do=cat | 200 | HTTP 200 | PASS | 77 |
| 8 | 引擎 | CAT代理 | GET /proxy/%E7%8C%AB%E6%B5%8B%E8%AF%95/ping?do=cat | 200 | HTTP 200 | PASS | 4 |
| 9 | 引擎 | 解析不存在 | GET /parse/__not_exists__ | 404 | HTTP 404 | PASS | 2 |
| 10 | 控制器 | /file-proxy/health | GET /file-proxy/health | 200 | HTTP 200 | PASS | 2 |
| 11 | 控制器 | /file-proxy/status | GET /file-proxy/status | 200 | HTTP 200 | PASS | 1 |
| 12 | 控制器 | /m3u8-proxy/health | GET /m3u8-proxy/health | 200 | HTTP 200 | PASS | 1 |
| 13 | 控制器 | /m3u8-proxy/status | GET /m3u8-proxy/status | 200 | HTTP 200 | PASS | 1 |
| 14 | 控制器 | /unified-proxy/health | GET /unified-proxy/health | 200 | HTTP 200 | PASS | 1 |
| 15 | 控制器 | /unified-proxy/status | GET /unified-proxy/status | 200 | HTTP 200 | PASS | 1 |
| 16 | 控制器 | /webdav/health | GET /webdav/health | 200 | HTTP 200 | PASS | 1 |
| 17 | 控制器 | /webdav/status | GET /webdav/status | 200 | HTTP 200 | PASS | 1 |
| 18 | 控制器 | /ftp/health | GET /ftp/health | 200 | HTTP 200 | PASS | 1 |
| 19 | 控制器 | /ftp/status | GET /ftp/status | 200 | HTTP 200 | PASS | 1 |
| 20 | 控制器 | /docs/apidoc.md | GET /docs/apidoc.md | 200 | HTTP 200 | PASS | 7 |
| 21 | 控制器 | /source-checker/config/default | GET /source-checker/config/default | 200 | HTTP 200 | PASS | 1 |
| 22 | 控制器 | /image/memory | GET /image/memory | 200 | HTTP 200 | PASS | 2 |
| 23 | 控制器 | /image/list | GET /image/list | 200 | HTTP 200 | PASS | 1 |
| 24 | 控制器 | /clipboard/read | GET /clipboard/read | 200 | HTTP 200 | PASS | 2 |
| 25 | 控制器 | /config/index.js | GET /config/index.js | 200 | HTTP 200 | PASS | 47 |
| 26 | 参数校验 | /file-proxy/proxy无auth | GET /file-proxy/proxy | 401 | HTTP 401 | PASS | 2 |
| 27 | 参数校验 | /file-proxy/proxy?auth=drpys | GET /file-proxy/proxy?auth=drpys | 400 | HTTP 400 | PASS | 4 |
| 28 | 参数校验 | /m3u8-proxy/playlist?auth=drpys | GET /m3u8-proxy/playlist?auth=drpys | 400 | HTTP 400 | PASS | 1 |
| 29 | 参数校验 | /unified-proxy/proxy?auth=drpys | GET /unified-proxy/proxy?auth=drpys | 400 | HTTP 400 | PASS | 2 |
| 30 | 参数校验 | /webdav/file | GET /webdav/file | 400 | HTTP 400 | PASS | 1 |
| 31 | 参数校验 | /ftp/file | GET /ftp/file | 400 | HTTP 400 | PASS | 1 |
| 32 | 参数校验 | /mediaProxy | GET /mediaProxy | 400 | HTTP 400 | PASS | 2 |
| 33 | 安全 | unified内网拦截 | /unified-proxy/proxy?auth=drpys&url=http://127.0.0.1 | 403 | HTTP 403 | PASS | 2 |
| 34 | 控制器 | authcoder | /authcoder?len=8&number=3 | 200+3行 | HTTP 200, lines=3 | PASS | 1 |
| 35 | 控制器 | encoder | POST /encoder | 200 | HTTP 200 | PASS | 4 |
| 36 | 控制器 | decoder参数校验 | POST /decoder | 400 | HTTP 400 | PASS | 2 |
| 37 | 控制器 | ws/broadcast参数校验 | POST /ws/broadcast | 400 | HTTP 400 | PASS | 2 |

## 3. 证据
- 1. /health: PASS | {"status":"ok","timestamp":"2026-02-22 11:36:18","python":{"available":true,"daemon_running":true}}
- 2. /: PASS |                  <!DOCTYPE html>                 <html lang="en">                 <head>                     <meta charset="UTF-8">                     <meta name="viewport" content="width=device-width, initial-scale=1.0
- 3. /ws/status: PASS | {"status":"ok","timestamp":"2026-02-22 11:36:18","clients":0,"console_intercepted":true}
- 4. /ws echo: PASS | {"type":"welcome","message":"WebSocket connection established","clientId":1771731378319.4033,"timestamp":1771731378319} | {"type":"echo","originalMessage":{"type":"heartbeat","from":"validator"},"timestamp":1771731378322,"clientId":1771731378
- 5. JS设置中心: PASS | {"type":"设置","hikerListCol":"icon_round_4","hikerClassListCol":"avatar","class":[{"type_id":"push","type_name":"推送","type_flag":"3-11-S"},{"type_id":"quark","type_name":"夸克","type_flag":"3-11-S"},{"type_id":"uc","type_name":"UC","type_flag":"3-11-S"},{"type_id":"ali","type_name":"阿里","type_flag":"3-11-S"},{"type_id":"baidu","type_name":"百度","type_flag":"3-11-S"},{"type_id":"bili","type_name":"哔哩",
- 6. PY依赖测试: PASS | {"class":[{"type_name":"动漫","type_id":"3"},{"type_name":"动漫电影","type_id":"17"},{"type_name":"综艺","type_id":"4"},{"type_name":"纪录片","type_id":"5"},{"type_name":"动作片","type_id":"6"},{"type_name":"爱情片","type_id":"7"},{"type_name":"科幻片","type_id":"8"},{"type_name":"战争片","type_id":"9"},{"type_name":"剧情片","type_id":"10"},{"type_name":"恐怖片","type_id":"11"},{"type_name":"喜剧片","type_id":"12"},{"type_name":
- 7. CAT猫测试: PASS | {"class":[{"type_id":"test","type_name":"测试分类"}],"list":[{"vod_name":"测试","vod_id":"index.html","vod_pic":"https://gitee.com/CherishRx/imagewarehouse/raw/master/image/13096725fe56ce9cf643a0e4cd0c159c.gif","vod_remarks":"原始JS"}]}
- 8. CAT代理: PASS | hello drpyS, 我是猫测试的本地代理
- 9. 解析不存在: PASS | {"error":"解析 __not_exists__ not found"}
- 10. /file-proxy/health: PASS | {"status":"ok","service":"Remote File Proxy","timestamp":"2026-02-22T03:36:18.641Z","cache":{"requests":{"size":0,"stats":{"hits":0,"misses":0,"evictions":0,"expirations":0,"cleanups":0,"size":0,"maxSize":1000,"hitRate":"0.00%","memoryUsage":"0B","name":"FileProxy-RequestCache","defaultTTL":300000,"cleanupInterval":600
- 11. /file-proxy/status: PASS | {"service":"Remote File Proxy Controller","version":"1.0.0","status":"running","cache":{"timeout":300000,"requests":{"size":0,"stats":{"hits":0,"misses":0,"evictions":0,"expirations":0,"cleanups":0,"size":0,"maxSize":1000,"hitRate":"0.00%","memoryUsage":"0B","name":"FileProxy-RequestCache","defaultTTL":300000,"cleanupI
- 12. /m3u8-proxy/health: PASS | {"status":"ok","service":"Proxy Service","timestamp":"2026-02-22T03:36:18.643Z","cache":{"requests":{"size":0,"stats":{"hits":0,"misses":0,"evictions":0,"expirations":0,"cleanups":0,"size":0,"maxSize":1000,"hitRate":"0.00%","memoryUsage":"0B","name":"M3U8Proxy-RequestCache","defaultTTL":300000,"cleanupInterval":60000}}
- 13. /m3u8-proxy/status: PASS | {"service":"M3U8 Stream Proxy Controller","version":"1.0.0","status":"running","cache":{"timeout":300000,"requests":{"size":0,"stats":{"hits":0,"misses":0,"evictions":0,"expirations":0,"cleanups":0,"size":0,"maxSize":1000,"hitRate":"0.00%","memoryUsage":"0B","name":"M3U8Proxy-RequestCache","defaultTTL":300000,"cleanupI
- 14. /unified-proxy/health: PASS | {"status":"ok","service":"Unified Smart Proxy","timestamp":"2026-02-22T03:36:18.645Z","cache":{"requests":{"size":0,"stats":{"hits":0,"misses":0,"evictions":0,"expirations":0,"cleanups":0,"size":0,"maxSize":1000,"hitRate":"0.00%","memoryUsage":"0B","name":"UnifiedProxy-RequestCache","defaultTTL":300000,"cleanupInterval
- 15. /unified-proxy/status: PASS | {"service":"Unified Smart Proxy Controller","version":"1.0.0","status":"running","cache":{"timeout":300000,"requests":{"size":0,"stats":{"hits":0,"misses":0,"evictions":0,"expirations":0,"cleanups":0,"size":0,"maxSize":1000,"hitRate":"0.00%","memoryUsage":"0B","name":"UnifiedProxy-RequestCache","defaultTTL":300000,"cle
- 16. /webdav/health: PASS | {"status":"ok","service":"Proxy Service","timestamp":"2026-02-22T03:36:18.648Z","cache":{"requests":{"size":0,"stats":{"hits":0,"misses":0,"evictions":0,"expirations":0,"cleanups":0,"size":0,"maxSize":100,"hitRate":"0.00%","memoryUsage":"0B","name":"WebDAVProxy-ClientCache","defaultTTL":300000,"cleanupInterval":60000}}
- 17. /webdav/status: PASS | {"service":"WebDAV Proxy Controller","version":"1.0.0","status":"running","cache":{"timeout":300000,"requests":{"size":0,"stats":{"hits":0,"misses":0,"evictions":0,"expirations":0,"cleanups":0,"size":0,"maxSize":100,"hitRate":"0.00%","memoryUsage":"0B","name":"WebDAVProxy-ClientCache","defaultTTL":300000,"cleanupInterv
- 18. /ftp/health: PASS | {"status":"ok","service":"Proxy Service","timestamp":"2026-02-22T03:36:18.650Z","cache":{"requests":{"size":0,"stats":{"hits":0,"misses":0,"evictions":0,"expirations":0,"cleanups":0,"size":0,"maxSize":100,"hitRate":"0.00%","memoryUsage":"0B","name":"FTPProxy-ClientCache","defaultTTL":300000,"cleanupInterval":60000}},"a
- 19. /ftp/status: PASS | {"service":"FTP Proxy Controller","version":"1.0.0","status":"running","cache":{"timeout":300000,"requests":{"size":0,"stats":{"hits":0,"misses":0,"evictions":0,"expirations":0,"cleanups":0,"size":0,"maxSize":100,"hitRate":"0.00%","memoryUsage":"0B","name":"FTPProxy-ClientCache","defaultTTL":300000,"cleanupInterval":60
- 20. /docs/apidoc.md: PASS | "\n                <!DOCTYPE html>\n                <html lang=\"en\">\n                <head>\n                    <meta charset=\"UTF-8\">\n                    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n                    <title>drpyS-apidoc.md</title>\n                    <style>\n 
- 21. /source-checker/config/default: PASS | {"success":true,"configUrl":"http://127.0.0.1:5757/config/1?sub=all&healthy=0&pwd=","message":"获取默认配置地址成功"}
- 22. /image/memory: PASS | {"success":true,"data":{"imageCount":0,"totalSize":0,"totalSizeMB":"0.00"}}
- 23. /image/list: PASS | {"success":true,"data":{"images":[],"total":0}}
- 24. /clipboard/read: PASS | ""
- 25. /config/index.js: PASS | "var O7=Object.create;var Ed=Object.defineProperty;var P7=Object.getOwnPropertyDescriptor;var D7=Object.getOwnPropertyNames;var L7=Object.getPrototypeOf,k7=Object.prototype.hasOwnProperty;var _=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ci=(e,t)=>{for(var r in t)Ed(e,r,{get:t[r],enumerable:!0})},GA=(e,t,r,
- 26. /file-proxy/proxy无auth: PASS | {"error":"Unauthorized","message":"Missing or invalid auth parameter","code":401}
- 27. /file-proxy/proxy?auth=drpys: PASS | {"error":"Missing required parameter: url"}
- 28. /m3u8-proxy/playlist?auth=drpys: PASS | {"error":"Missing required parameter: url"}
- 29. /unified-proxy/proxy?auth=drpys: PASS | {"error":"Missing required parameter: url"}
- 30. /webdav/file: PASS | {"error":"Missing required parameter: path"}
- 31. /ftp/file: PASS | {"error":"Missing required parameter: path"}
- 32. /mediaProxy: PASS | {"error":"Missing required parameter: url"}
- 33. unified内网拦截: PASS | {"error":"Access to internal network addresses is not allowed"}
- 34. authcoder: PASS | QpbdcuBd j0o14OxC tjC1Vmog
- 35. encoder: PASS | {"success":true,"result":"ZHJweS1ub2Rl"}
- 36. decoder参数校验: PASS | {"error":"Missing required parameters: code and auth_code"}
- 37. ws/broadcast参数校验: PASS | {"error":"Message is required"}

## 4. 人工复核步骤
- curl http://127.0.0.1:5757/health
- curl "http://127.0.0.1:5757/api/%E8%AE%BE%E7%BD%AE%E4%B8%AD%E5%BF%83"
- 连接 ws://127.0.0.1:5757/ws 并发送 {"type":"heartbeat"}
